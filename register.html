<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./css/style.css" />
    <title>Регистрация</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin=""
    />
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
      crossorigin=""
    ></script>
    <script>
      function validateForm() {
        const namePattern = /^[А-Яа-яЁё\s-]+$/;
        const emailPattern =
          /^[a-zA-Z0-9._%+-]+@(?:[a-zA-Z0-9-]+\.)+[a-zA-Z]{2,}$/;
        const name = document.getElementById("registerName").value;
        const surname = document.getElementById("registerSurname").value;
        const patronymic = document.getElementById("registerPatronymic").value;
        const email = document.getElementById("registerEmail").value;
        const password = document.getElementById("registerPassword").value;
        const confirmPassword =
          document.getElementById("confirmPassword").value;
        const rules = document.getElementById("registerRules").checked;

        if (!namePattern.test(name)) {
          alert("Имя должно содержать только кириллицу, пробел и тире.");
          return false;
        }

        if (!namePattern.test(surname)) {
          alert("Фамилия должна содержать только кириллицу, пробел и тире.");
          return false;
        }

        if (patronymic && !namePattern.test(patronymic)) {
          alert("Отчество должно содержать только кириллицу, пробел и тире.");
          return false;
        }

        if (!emailPattern.test(email)) {
          alert("Неверный формат email.");
          return false;
        }

        if (email === "admin") {
          alert("Этот email недоступен.");
          return false;
        }

        if (password.length < 3) {
          alert("Пароль должен быть не менее 3 символов.");
          return false;
        }

        if (password !== confirmPassword) {
          alert("Пароли не совпадают.");
          return false;
        }

        if (!rules) {
          alert("Вы должны согласиться с правилами регистрации.");
          return false;
        }

        return true;
      }

      function handleSubmit(event) {
        event.preventDefault();
        if (validateForm()) {
          window.location.href = "main.html";
        }
      }
    </script>
  </head>
  <body>
    <div class="container mt-5">
      <h2 class="text-center">Регистрация</h2>
      <form onsubmit="handleSubmit(event)">
        <div class="mb-3">
          <label for="registerName" class="form-label">Имя</label>
          <input
            type="text"
            class="form-control"
            id="registerName"
            name="name"
            required
          />
        </div>
        <div class="mb-3">
          <label for="registerSurname" class="form-label">Фамилия</label>
          <input
            type="text"
            class="form-control"
            id="registerSurname"
            name="surname"
            required
          />
        </div>
        <div class="mb-3">
          <label for="registerPatronymic" class="form-label">Отчество</label>
          <input
            type="text"
            class="form-control"
            id="registerPatronymic"
            name="patronymic"
          />
        </div>
        <div class="mb-3">
          <label for="registerEmail" class="form-label">Email</label>
          <input
            type="email"
            class="form-control"
            id="registerEmail"
            name="email"
            required
          />
        </div>
        <div class="mb-3">
          <label for="registerPassword" class="form-label">Пароль</label>
          <input
            type="password"
            class="form-control"
            id="registerPassword"
            name="password"
            required
          />
        </div>
        <div class="mb-3">
          <label for="confirmPassword" class="form-label"
            >Подтвердите пароль</label
          >
          <input
            type="password"
            class="form-control"
            id="confirmPassword"
            name="confirm_password"
            required
          />
        </div>
        <div class="mb-3 form-check">
          <input
            type="checkbox"
            class="form-check-input"
            id="registerRules"
            required
          />
          <label class="form-check-label" for="registerRules">
            Согласие с правилами регистрации
          </label>
        </div>
        <button type="submit" class="btn btn-primary">
          Зарегистрироваться
        </button>
      </form>
      <p class="mt-3">Уже есть аккаунт? <a href="sign.html">Войти</a></p>
    </div>
  </body>
</html>
